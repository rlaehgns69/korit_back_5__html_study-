"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[4554],{70227:function(e){var t,r,a=Object.defineProperty,n=Object.getOwnPropertyDescriptor,s=Object.getOwnPropertyNames,o=Object.prototype.hasOwnProperty,l={};((e,t)=>{for(var r in t)a(e,r,{get:t[r],enumerable:!0})})(l,{ChatMode:()=>u,ChatModel:()=>c,GenerateAPIError:()=>C,GenerateError:()=>E,GenerateSyntaxError:()=>f,MAX_TOKEN_CONSTRAINTS:()=>d,PLUGIN_TYPE:()=>i,StreamConnectionTimeoutError:()=>y,StreamError:()=>_,StreamExceptionError:()=>k,StreamIdleTimeoutError:()=>M,StreamInvalidTokenError:()=>R,StreamMessageError:()=>S,changeModelEnumToModelName:()=>g,checkChatSendable:()=>T,findNewChat:()=>p,getMaxTokenConstraints:()=>m,isImageGenerateInput:()=>h}),e.exports=((e,t,r,l)=>{if(t&&"object"==typeof t||"function"==typeof t)for(let r of s(t))o.call(e,r)||void 0===r||a(e,r,{get:()=>t[r],enumerable:!(l=n(t,r))||l.enumerable});return e})(a({},"__esModule",{value:!0}),l);var i={WantedLookup:"wanted-lookup",DBpiaSearch:"dbpia-search",PackageTracking:"package-tracking",AllstayList:"allstay-list",AllstayHotel:"allstay-hotel",GmailFind:"gmail-find",GmailSummary:"gmail-summary",CalendarLookup:"calendar-lookup",CalendarInsertConflict:"calendar-insert-conflict",CalendarLookupHoliday:"calendar-lookup-holiday",CalendarInsert:"calendar-insert",CalendarLookupFail:"calendar-lookup-fail",CalendarFreebusy:"calendar-freebusy",Search11St:"11st-search",TimeDeal11St:"11st-timedeal",Weather11St:"11st-weather",Recommend11St:"11st-recommend",Popular11St:"11st-popular",GangnamunniQA:"gangnamunni-qa",GangnamunniError:"gangnamunni-error",LawAndGoodQA:"lawandgood-qa",LawAndGoodError:"lawandgood-error",QueenItSearch:"queenit-search",QueenItRecommend:"queenit-recommend",QueenItWeather:"queenit-weather",QueenItError:"queenit-error",SiksinSearch:"siksin-search",SikSinNewRestaurant:"siksin-new-restaurant",SikSinError:"skisin-error",MyRealTripTripPlan:"myrealtrip-trip-plan",MyRealTripFlightSearch:"myrealtrip-flight-search",MyRealTripTripSpot:"myrealtrip-trip-spot",MyRealTripProductSearch:"myrealtrip-product-search",MyRealTripError:"myrealtrip-error",PlanfitPartsSearch:"planfit-parts-search",PlanfitExerciseSearch:"planfit-exercise-search",PlanfitError:"planfit-error",HanabankExchangeRate:"hanabank-exchange-rate",GmarketSearch:"gmarket-search"},c=((t=c||{})["GPT3.5"]="gpt3.5",t.GPT4="gpt4",t["GPT3.5_16K"]="gpt3.5_16k",t.PALM2="palm2",t.GPT4V="gpt4v",t.GPT4T="gpt4t",t.CLAUDE_INSTANT="claude_instant",t["CLAUDE2.1"]="claude2.1",t.WRTN_SEARCH="wrtn_search",t),u=((r=u||{}).CHAT="chat",r.EXTENSION="extension",r);function p(e){return e.find(e=>!e.model&&!e.mode)||null}var d={"gpt3.5":6e3,gpt4:6e3,gpt4t:6e3,"gpt3.5_16k":18e3,palm2:6e3,gpt4v:6e3,claude_instant:5e5,"claude2.1":5e5,wrtn_search:6e3},g=(e,t)=>{switch(e){case"gpt3.5":return"extension"===t?"확장앱":"GPT-3.5";case"gpt4":return"GPT-4";case"gpt4t":return"GPT-4 Turbo";case"gpt3.5_16k":return"GPT-3.5-16K";case"palm2":return"PaLM2";case"gpt4v":return"GPT-4 Vision";case"claude_instant":return"Claude Instant";case"claude2.1":return"Claude 2.1";case"wrtn_search":return"WRTN Search"}};function h(e){return e.includes("그려줘")||e.includes("Draw")}function m(e,t){return h(e)?3e3:d[t]}function T(e,t,r){let a=e.trim();return"gpt4t"===r?a.length>0||t.length>0:a.length>0}var E=class extends Error{toLogText(){return"".concat(this.userMessage,"\n").concat(this.logText)}toUserErrorMessage(){return this.userMessage}appendLogText(e){this.logText+="\n".concat(e)}updateUserMessage(e){this.userMessage=e}constructor(e,t,r){super(),this.logLevel="info",this.url=e,this.code=r,this.params=t;let a=Object.entries(this.params).map(e=>{let[t,r]=e;return"".concat(t,": ").concat(r)}).join("\n");this.logText="[GenerateError]\ncode: ".concat(this.code,"\nurl: ").concat(this.url,"\n").concat(a),this.userMessage="생성 오류가 발생했어요"}},f=class extends E{constructor(e,t){super("null",e,"E_STREAM_SYNTAX_ERROR"),this.appendLogText("error: ".concat(t)),this.updateUserMessage(t),this.logLevel="warn"}},_=class extends E{constructor(e,t,r,a){super(e,t,r),this.logLevel="info",this.timestamps=[a.startedAt,a.openedAt,a.lastMessagedAt];let n=new Date,[s,o,l]=this.timestamps.map(e=>e?"".concat(((n.getTime()-e.getTime())/1e3).toFixed(2),"s"):"");this.appendLogText("\n[stream timestamps]\n\n- startedAt: ".concat(s,"\n- openedAt: ").concat(o,"\n- lastMessagedAt: ").concat(l,"\n"))}},S=class extends _{constructor(e,t,r,a){super(e,t,"E_STREAM_MESSAGE_ERROR",a);let n=Object.entries(r).map(e=>{let[t,r]=e;return"".concat(t,": ").concat(r)}).join("\n");try{if(r.data){let e=JSON.parse(r.data);"message"in e?this.updateUserMessage(e.message):this.updateUserMessage(r.data)}}catch(e){}this.appendLogText(n)}},k=class extends _{constructor(e,t,r,a){super(e,t,"E_STREAM_EXCEPTION_ERROR",a),"statusCode"in r&&Number(r.statusCode)>=400&&(this.logLevel="error"),this.updateUserMessage("일시적으로 오류가 발생하고 있어요.\n잠시 후 다시 시도해 주세요."),this.appendLogText("error: ".concat(JSON.stringify(r)))}},y=class extends _{constructor(e,t,r){super(e,t,"E_STREAM_CONNECTION_ERROR",r),this.logLevel="error",this.updateUserMessage("일시적으로 생성 요청량이 많아요.\n잠시 후 다시 시도해주세요.")}},M=class extends _{constructor(e,t,r){super(e,t,"E_STREAM_IDLE_TIMEOUT_ERROR",r),this.logLevel="error",this.updateUserMessage("일시적으로 생성 요청량이 많아요.\n잠시 후 다시 시도해주세요.")}},R=class extends _{constructor(e,t,r,a){super(e,t,"E_STREAM_INVALID_TOKEN",a),this.appendLogText("error: ".concat(JSON.stringify(r)))}},C=class extends E{constructor(e,t,r,a){super(e,t,r),this.response=a,this.appendLogText("\nresponse: ".concat(JSON.stringify(a))),a.message&&this.updateUserMessage(a.message)}}},40268:function(e,t,r){r.d(t,{ZP:function(){return u}});var a=r(52983),n=r(49069),s=r(66759),o=r(83576);let l=e=>(0,s.qC)(e?e(0,null):null)[0],i=Promise.resolve(),c=e=>(t,r,n)=>{let c;let u=(0,a.useRef)(!1),{cache:p,initialSize:d=1,revalidateAll:g=!1,persistSize:h=!1,revalidateFirstPage:m=!0,revalidateOnMount:T=!1,parallel:E=!1}=n,[,,,f]=s.DY.get(s.Fs);try{(c=l(t))&&(c=s.UG+c)}catch(e){}let[_,S,k]=(0,s.JN)(p,c),y=(0,a.useCallback)(()=>{let e=(0,s.o8)(_()._l)?d:_()._l;return e},[p,c,d]);(0,o.useSyncExternalStore)((0,a.useCallback)(e=>c?k(c,()=>{e()}):()=>{},[p,c]),y,y);let M=(0,a.useCallback)(()=>{let e=_()._l;return(0,s.o8)(e)?d:e},[c,d]),R=(0,a.useRef)(M());(0,s.LI)(()=>{if(!u.current){u.current=!0;return}c&&S({_l:h?R.current:M()})},[c,p]);let C=T&&!u.current,N=e(c,async e=>{let a=_()._i,o=[],l=M(),[i]=(0,s.JN)(p,e),c=i().data,u=[],d=null;for(let e=0;e<l;++e){let[l,i]=(0,s.qC)(t(e,E?null:d));if(!l)break;let[h,T]=(0,s.JN)(p,l),_=h().data,S=g||a||(0,s.o8)(_)||m&&!e&&!(0,s.o8)(c)||C||c&&!(0,s.o8)(c[e])&&!n.compare(c[e],_);if(r&&S){let t=async()=>{let t=l in f;if(t){let e=f[l];delete f[l],_=await e}else _=await r(i);T({data:_,_k:i}),o[e]=_};E?u.push(t):await t()}else o[e]=_;E||(d=_)}return E&&await Promise.all(u.map(e=>e())),S({_i:s.i_}),o},n),x=(0,a.useCallback)(function(e,t){let r="boolean"==typeof t?{revalidate:t}:t||{},a=!1!==r.revalidate;return c?(a&&((0,s.o8)(e)?S({_i:!0}):S({_i:!1})),arguments.length?N.mutate(e,{...r,revalidate:a}):N.mutate()):i},[c,p]),P=(0,a.useCallback)(e=>{let r;if(!c)return i;let[,a]=(0,s.JN)(p,c);if((0,s.mf)(e)?r=e(M()):"number"==typeof e&&(r=e),"number"!=typeof r)return i;a({_l:r}),R.current=r;let n=[],[o]=(0,s.JN)(p,c),l=null;for(let e=0;e<r;++e){let[r]=(0,s.qC)(t(e,l)),[a]=(0,s.JN)(p,r),i=r?a().data:s.i_;if((0,s.o8)(i))return x(o().data);n.push(i),l=i}return x(n)},[c,p,x,M]);return{size:M(),setSize:P,mutate:x,get data(){return N.data},get error(){return N.error},get isValidating(){return N.isValidating},get isLoading(){return N.isLoading}}},u=(0,s.xD)(n.ZP,c)}}]);